接下来我们攻克软考网络部分的另一个必考点：**NAT (网络地址转换)**。

这也是一个“听着很技术，其实全是生活常识”的知识点。

### 一、 什么是 NAT？（公司的总机与分机）

**场景：** 你们公司很大，有 1000 个员工（1000 台电脑）。但是，公司只向电信局申请了**一根电话线**（一个公网 IP），号码是 `8888-8888`。

* **问题：** 外部客户想找你（员工 A），但他打不进你的内线分机 `101`。你也无法直接用分机打给客户显示你的分机号。
* **解决方案 (NAT)：**
    * **你打出去：** 你拨号 -> 电话交换机（NAT 路由器）把你的分机号 `101` 换成总机号 `8888-8888` 打给客户。客户看到的是总机号。
    * **客户打进来：** 客户打总机 `8888-8888` -> 前台（NAT 路由器）接听 -> 问“找哪位？” -> 转接到你的分机 `101`。

**考试定义：**
NAT (Network Address Translation) 就是把**私有 IP 地址**（分机号）转换成**公网 IP 地址**（总机号）的技术。主要为了**节省 IP 地址**。

---

### 二、 必须背下来的“私有 IP 地址”（分机号码段）

软考特别喜欢问：“下面哪个 IP 地址不能在互联网上直接使用？” 或者 “哪个是私有地址？”

你只需要记住这三段**“分机号码”**，只要在这个范围里，就是**私有 IP**（局域网专用）：

| 类别 | 范围 (背下开头的数字) | 适用场景 | 记忆钩子 |
| :--- | :--- | :--- | :--- |
| **A 类** | **10**.0.0.0 ~ 10.255.255.255 | 大型网络 | 只要看到 **10.** 开头，必是私有 |
| **B 类** | **172.16**.0.0 ~ 172.31.255.255 | 中型网络 | **172.16** 到 **172.31** (有点难记，重点记172) |
| **C 类** | **192.168**.0.0 ~ 192.168.255.255 | 家庭/小型 | **192.168** (你家路由器的默认地址) |

> **秒杀技巧：** 考试看到 `192.168.x.x` 或者 `10.x.x.x`，直接判定为**私有地址**，不能在公网（互联网）上路由。

---

### 三、 NAT 的三种玩法（怎么转接？）

#### 1. 静态 NAT (Static NAT) —— “老板专线”
* **逻辑：** **一对一**。
* **操作：** 1 个内网 IP 绑定 1 个公网 IP。
* **场景：** 老板的分机 `101` 永远对应外线 `8888-0001`。不管谁打，都是这个号。
* **缺点：** 并不省 IP，只为了隐藏内网真实 IP。

#### 2. 动态 NAT (Dynamic NAT) —— “抢电话用”
* **逻辑：** **多对多**（但不重用）。
* **操作：** 公司买了 5 个公网 IP，有 100 个人。谁先打电话，谁就占用一个公网 IP。打完放回去给别人用。
* **缺点：** 如果 5 个人都在打电话，第 6 个人就打不出去了。

#### 3. NAPT (PAT) —— “最常用的伪装术” **(考试重点)**
* **全称：** 网络地址端口转换 (Network Address Port Translation)。
* **逻辑：** **多对一**（大家共用一个公网 IP）。
* **操作：**
    * 员工 A 访问百度 -> 路由器记录：用 **公网IP:1001** 端口代表 A。
    * 员工 B 访问百度 -> 路由器记录：用 **公网IP:1002** 端口代表 B。
* **生活场景：** 这就是现在**家用路由器**的工作方式。全家手机电脑都连 WiFi，对外其实只有一个公网 IP，靠**端口号**区分是谁在上网。

---

### 四、 极速巩固习题

**【习题 1：私有地址识别】**
> 下列 IP 地址中，属于**私有 IP 地址**（不能直接在互联网上进行路由）的是（B）。
> A. 172.32.1.1
> B. 10.255.1.1
> C. 192.1.1.1
> D. 202.106.0.20

**【习题 2：NAT 原理】**
> 家庭宽带路由器通常使用 NAPT 技术实现多台设备共享上网。关于 NAPT，下列说法正确的是（ C）。
> A. 它实现了内网 IP 和公网 IP 的一对一静态映射
> B. 它通过不同的协议号来区分不同的内网主机
> C. 它通过不同的**端口号**来区分不同的内网主机
> D. 它不需要公网 IP 地址

**【习题 3：场景判断】**
> 某公司内部使用 `192.168.1.0/24` 网段，为了让内部员工能访问互联网，需要在出口路由器上配置（D）技术。
> A. DHCP
> B. DNS
> C. VPN
> D. NAT

*(请给出你的答案，特别是第1题，注意看范围！)*