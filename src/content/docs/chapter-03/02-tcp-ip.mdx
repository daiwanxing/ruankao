---
title: 3.2 TCP/IP协议族
description: 掌握TCP/IP协议族的四层结构和主要协议，理解IPv4和IPv6的区别
sidebar:
  order: 2
  badge:
    text: 重点
    variant: tip
---

import MemoryCard from '../../../components/MemoryCard.astro';
import ExerciseBox from '../../../components/ExerciseBox.astro';
import { Card } from '@astrojs/starlight/components';

## 一、教学目标

掌握TCP/IP协议族的四层结构和主要协议，理解IPv4和IPv6的区别。

## 二、核心讲解

### 1. TCP/IP协议族

| TCP/IP层 | 对应OSI层 | 主要协议 | 功能说明 |
|----------|-----------|----------|----------|
| **应用层** | 应用层+表示层+会话层 | HTTP、FTP、SMTP、DNS | 接收来自传输层的数据，或按不同的应用要求将数据传输至传输层 |
| **传输层** | 传输层 | TCP、UDP | TCP是面向连接的协议；UDP是非连接协议 |
| **网际层** | 网络层 | ICMP、IP、IGMP | 负责网络中数据包的具体传输 |
| **网络接口层** | 数据链路层+物理层 | ARP、RARP、以太网、WiFi | 提供链路管理错误检测 |

<MemoryCard
  title="TCP/IP四层模型"
  formula="应用层 → 传输层 → 网际层 → 网络接口层"
  importance={5}
  category="formula"
/>

### 2. IPv4协议

**地址结构**：
- 由32位二进制数组成，即4个字节
- 点分十进制表示法（如192.121.123.56）
- 由网络位和主机位两大部分组成

**地址分类**：

| 类别 | 首字节范围 | 网络位/主机位 | 用途 | 主机数 |
|------|-----------|---------------|------|--------|
| **A类** | 1-126 | 8/24 | 大型网络 | 16,777,214 |
| **B类** | 128-191 | 16/16 | 中型网络 | 65,534 |
| **C类** | 192-223 | 24/8 | 小型网络 | 254 |
| **D类** | 224-239 | - | 组播 | - |
| **E类** | 240-255 | - | 保留 | - |

**NAT技术**：
- 一般在家庭网关、企业网关或路由器上实现
- 使用私网地址的主机需要通过地址转换与公网IPv4地址的主机进行通信

### 3. IPv6协议

**特点**：
- 由128位二进制数组成，是IPv4地址长度的4倍
- 解决IPv4地址不够问题

### 4. TCP与UDP对比

| 特性 | TCP | UDP |
|------|-----|-----|
| **连接** | 面向连接 | 无连接 |
| **可靠性** | 可靠传输 | 不可靠传输 |
| **速度** | 较慢 | 较快 |
| **应用场景** | 文件传输、邮件 | 视频、语音 |

## 三、通俗例子

<Card title="TCP和UDP的例子" icon="information">
- **TCP**：像打电话，需要先拨号建立连接，确认对方接听才能通话，通话过程中会确认对方是否听到（可靠传输）
- **UDP**：像广播喇叭，直接喊话，不管有没有人听到，也不需要确认（不可靠传输，但速度快）
</Card>

<Card title="IP地址分类例子" icon="information">
- **A类**：像大型集团公司，总部（网络号）+各地分公司（主机号），分公司数量少但每个分公司人数很多
- **B类**：像中型公司，分公司数量中等，每个分公司人数中等
- **C类**：像小型商店，分公司数量很多，但每个分公司人数很少
</Card>

## 四、知识点速记

| 知识点 | 关键要点 | 记忆口诀 |
|--------|----------|----------|
| **TCP/IP四层** | 应用层、传输层、网际层、网络接口层 | 四层 |
| **TCP特点** | 面向连接、可靠传输 | 可靠 |
| **UDP特点** | 无连接、不可靠传输、速度快 | 快速 |
| **IPv4地址** | 32位，分A、B、C、D、E五类 | 32位 |
| **IPv6地址** | 128位，解决IPv4地址不足问题 | 128位 |

## 五、课后作业

### 思考题

1. 比较TCP和UDP协议的优缺点
2. IPv4地址分为哪几类？各类适用于什么规模的网络？
3. NAT技术的作用是什么？
4. 简述IPv6相比IPv4的优势

### 课堂测验

<ExerciseBox
  question="TCP协议的特点是（ ）"
  options={[
    'A. 无连接',
    'B. 不可靠传输',
    'C. 面向连接',
    'D. 速度快'
  ]}
  answer="C"
  explanation="TCP是面向连接的可靠传输协议。"
/>

<ExerciseBox
  question="IPv4地址由（ ）位二进制数组成"
  options={[
    'A. 16',
    'B. 32',
    'C. 64',
    'D. 128'
  ]}
  answer="B"
  explanation="IPv4地址由32位二进制数组成。"
/>

<ExerciseBox
  question="C类地址最多支持（ ）个主机"
  options={[
    'A. 254',
    'B. 65534',
    'C. 16777214',
    'D. 无数个'
  ]}
  answer="A"
  explanation="C类地址最多支持254个主机（2^8-2）。"
/>

<ExerciseBox
  question="IPv6地址由（ ）位二进制数组成"
  options={[
    'A. 64',
    'B. 128',
    'C. 256',
    'D. 512'
  ]}
  answer="B"
  explanation="IPv6地址由128位二进制数组成。"
/>

## 六、重点总结

### 本节必记考点 ⭐⭐⭐⭐⭐

1. **TCP/IP四层**：应用层、传输层、网际层、网络接口层
2. **TCP vs UDP**：TCP面向连接可靠，UDP无连接快速
3. **IPv4分类**：A类(1-126)、B类(128-191)、C类(192-223)
4. **IPv6地址**：128位，解决IPv4地址不足问题
